---
title: Next.js App Router å®Œå…¨æŒ‡å—
description: æ·±å…¥ç†è§£ Next.js 15 çš„ App Router æ¶æ„ï¼ŒæŒæ¡æœåŠ¡ç«¯ç»„ä»¶ã€å®¢æˆ·ç«¯ç»„ä»¶ã€æ•°æ®è·å–ã€ç¼“å­˜ç­–ç•¥ç­‰æ ¸å¿ƒæ¦‚å¿µ
date: 2025-10-14
category: frontend
tags: [Next.js, React, App Router, SSR, TypeScript]
author: Tech Showcase
---

# Next.js App Router å®Œå…¨æŒ‡å—

Next.js 15 å¼•å…¥çš„ App Router æ˜¯ä¸€ä¸ªé©å‘½æ€§çš„æ¶æ„å˜åŒ–ï¼Œå®ƒåŸºäº React Server Componentsï¼Œä¸ºæˆ‘ä»¬æä¾›äº†æ›´å¼ºå¤§çš„æ•°æ®è·å–ã€è·¯ç”±å’Œæ¸²æŸ“èƒ½åŠ›ã€‚

## æ ¸å¿ƒæ¦‚å¿µ

### 1. æœåŠ¡ç«¯ç»„ä»¶ vs å®¢æˆ·ç«¯ç»„ä»¶

åœ¨ App Router ä¸­ï¼Œé»˜è®¤æ‰€æœ‰ç»„ä»¶éƒ½æ˜¯æœåŠ¡ç«¯ç»„ä»¶ï¼ˆServer Componentsï¼‰ï¼š

```tsx
// app/page.tsx - æœåŠ¡ç«¯ç»„ä»¶ï¼ˆé»˜è®¤ï¼‰
export default async function Page() {
  const data = await fetch('https://api.example.com/data')
  const json = await data.json()
  
  return <div>{json.title}</div>
}
```

éœ€è¦äº¤äº’æ—¶ä½¿ç”¨å®¢æˆ·ç«¯ç»„ä»¶ï¼š

```tsx
'use client'

import { useState } from 'react'

export default function Counter() {
  const [count, setCount] = useState(0)
  
  return (
    <button onClick={() => setCount(count + 1)}>
      Count: {count}
    </button>
  )
}
```

### 2. è·¯ç”±ç³»ç»Ÿ

App Router ä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿè·¯ç”±ï¼š

```
app/
â”œâ”€â”€ page.tsx                 # /
â”œâ”€â”€ about/
â”‚   â””â”€â”€ page.tsx            # /about
â”œâ”€â”€ blog/
â”‚   â”œâ”€â”€ page.tsx            # /blog
â”‚   â””â”€â”€ [slug]/
â”‚       â””â”€â”€ page.tsx        # /blog/:slug
â””â”€â”€ api/
    â””â”€â”€ users/
        â””â”€â”€ route.ts        # /api/users
```

### 3. æ•°æ®è·å–

åœ¨æœåŠ¡ç«¯ç»„ä»¶ä¸­ç›´æ¥ä½¿ç”¨ async/awaitï¼š

```tsx
async function getData() {
  const res = await fetch('https://api.example.com/data', {
    next: { revalidate: 3600 } // ç¼“å­˜1å°æ—¶
  })
  
  if (!res.ok) throw new Error('Failed to fetch data')
  
  return res.json()
}

export default async function Page() {
  const data = await getData()
  
  return <main>{/* æ¸²æŸ“æ•°æ® */}</main>
}
```

### 4. å¸ƒå±€ç³»ç»Ÿ

ä½¿ç”¨ `layout.tsx` åˆ›å»ºå…±äº«å¸ƒå±€ï¼š

```tsx
// app/layout.tsx
export default function RootLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <html lang="zh">
      <body>
        <nav>{/* å¯¼èˆªæ  */}</nav>
        {children}
        <footer>{/* é¡µè„š */}</footer>
      </body>
    </html>
  )
}
```

## å®æˆ˜æŠ€å·§

### 1. ç¼“å­˜ç­–ç•¥

```tsx
// é™æ€ç”Ÿæˆ - æ„å»ºæ—¶ç”Ÿæˆ
export const dynamic = 'force-static'

// æœåŠ¡ç«¯æ¸²æŸ“ - æ¯æ¬¡è¯·æ±‚éƒ½æ¸²æŸ“
export const dynamic = 'force-dynamic'

// å¢é‡é™æ€å†ç”Ÿæˆ - å®šæœŸé‡æ–°éªŒè¯
export const revalidate = 60 // 60ç§’
```

### 2. å…ƒæ•°æ®ä¼˜åŒ–

```tsx
import type { Metadata } from 'next'

export const metadata: Metadata = {
  title: 'My Page',
  description: 'Page description',
  openGraph: {
    title: 'My Page',
    description: 'Page description',
    images: ['/og-image.png'],
  },
}
```

### 3. åŠ è½½å’Œé”™è¯¯å¤„ç†

```tsx
// loading.tsx - åŠ è½½çŠ¶æ€
export default function Loading() {
  return <div>Loading...</div>
}

// error.tsx - é”™è¯¯å¤„ç†
'use client'

export default function Error({
  error,
  reset,
}: {
  error: Error
  reset: () => void
}) {
  return (
    <div>
      <h2>å‡ºé”™äº†ï¼</h2>
      <button onClick={() => reset()}>é‡è¯•</button>
    </div>
  )
}
```

## æ€§èƒ½ä¼˜åŒ–

### 1. ä»£ç åˆ†å‰²

App Router è‡ªåŠ¨è¿›è¡Œä»£ç åˆ†å‰²ï¼Œæ¯ä¸ªè·¯ç”±æ®µéƒ½ä¼šè¢«å•ç‹¬æ‰“åŒ…ã€‚

### 2. å›¾ç‰‡ä¼˜åŒ–

ä½¿ç”¨ Next.js Image ç»„ä»¶ï¼š

```tsx
import Image from 'next/image'

export default function Page() {
  return (
    <Image
      src="/hero.png"
      alt="Hero"
      width={1200}
      height={600}
      priority
    />
  )
}
```

### 3. å­—ä½“ä¼˜åŒ–

ä½¿ç”¨ next/font è‡ªåŠ¨ä¼˜åŒ–å­—ä½“ï¼š

```tsx
import { Inter } from 'next/font/google'

const inter = Inter({ subsets: ['latin'] })

export default function Layout({ children }) {
  return (
    <html className={inter.className}>
      <body>{children}</body>
    </html>
  )
}
```

## æ€»ç»“

Next.js App Router æä¾›äº†ï¼š

- ğŸš€ æ›´å¿«çš„é¦–å±åŠ è½½
- ğŸ’» æ›´å¥½çš„å¼€å‘ä½“éªŒ
- ğŸ”„ æµå¼æ¸²æŸ“æ”¯æŒ
- ğŸ“¦ è‡ªåŠ¨ä»£ç åˆ†å‰²
- ğŸ¯ æ›´çµæ´»çš„æ•°æ®è·å–

æŒæ¡è¿™äº›æ¦‚å¿µï¼Œä½ å°±èƒ½æ„å»ºé«˜æ€§èƒ½çš„ç°ä»£ Web åº”ç”¨ï¼

